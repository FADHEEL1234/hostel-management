{% extends "base.html" %}

{% block title %}Hostels | Hostel Booking{% endblock %}

{% block content %}
<div class="md-shell">
    <aside class="md-sidebar">
        <div class="md-brand">
            <span class="md-pill"></span>
            <h1>Hostel Manager</h1>
        </div>
        <nav class="md-nav">
            <a class="active" href="/">Dashboard</a>
            <a href="/bookings/">Bookings</a>
            <a href="/bookings/">Payments</a>
            <a href="/bookings/">Reports</a>
            <a href="/bookings/">Support</a>
        </nav>
        <div class="md-sidebar-foot">
            <p class="muted">TZS Â· East Africa Time</p>
            <a class="btn btn-ghost" href="/bookings/">Open bookings</a>
        </div>
    </aside>

    <section class="md-main">
        <div class="md-links">
            <span>Quick links:</span>
            <a href="{{ request.scheme }}://{{ request.get_host }}/">Home</a>
            <a href="{{ request.scheme }}://{{ request.get_host }}{% url 'login' %}">Login</a>
        </div>
        <header class="md-header">
            <div>
                <h2>Dashboard</h2>
                <p class="muted">Overview of bookings and guest activity.</p>
            </div>
            <div class="md-header-actions">
                <a class="btn" href="/bookings/">View bookings</a>
            </div>
        </header>

        <div class="md-metrics">
            <article class="md-metric metric-blue">
                <p>Total hostels</p>
                <h3>{{ hostels|length }}</h3>
                <span>Active listings</span>
            </article>
            <article class="md-metric metric-teal">
                <p>Weekly bookings</p>
                <h3>53</h3>
                <span>Last 7 days</span>
            </article>
            <article class="md-metric metric-amber">
                <p>Avg. stay</p>
                <h3>4.4</h3>
                <span>Nights per guest</span>
            </article>
            <article class="md-metric metric-pink">
                <p>Pending payments</p>
                <h3>65</h3>
                <span>Needs follow-up</span>
            </article>
        </div>

        <div class="md-panels">
            <section class="md-panel">
                <div class="md-panel-head">
                    <h4>Occupancy</h4>
                    <span class="muted">Last 30 days</span>
                </div>
                <div class="md-chart">
                    <div class="md-wave md-wave-a"></div>
                    <div class="md-wave md-wave-b"></div>
                </div>
            </section>
            <section class="md-panel">
                <div class="md-panel-head">
                    <h4>Guest Map</h4>
                    <span class="muted">Top regions</span>
                </div>
                <div class="md-map">
                    <div class="md-blob md-blob-a"></div>
                    <div class="md-blob md-blob-b"></div>
                    <div class="md-blob md-blob-c"></div>
                    <p class="muted">Regional interest overview</p>
                </div>
            </section>
        </div>

        <section class="md-panel md-list">
            <div class="md-panel-head">
                <h4>Hostel Listings</h4>
                <span class="muted">Manage and update details</span>
            </div>
            <div class="md-rows">
                {% for hostel in hostels %}
                    <article class="md-row">
                        <div class="md-thumb">
                            {% if hostel.image %}
                                <img src="{{ hostel.image.url }}" alt="{{ hostel.name }}" />
                            {% else %}
                                <div class="md-thumb-placeholder">No image</div>
                            {% endif %}
                        </div>
                        <div>
                            <h5>{{ hostel.name }}</h5>
                            <p class="muted">{{ hostel.city }}</p>
                            <p>{{ hostel.description|truncatewords:20 }}</p>
                        </div>
                        <div class="md-row-action">
                            <a class="btn btn-ghost" href="{% url 'hostel_detail' hostel.id %}">Open</a>
                        </div>
                    </article>
                {% empty %}
                    <p>No hostels yet. Add some in the admin panel.</p>
                {% endfor %}
            </div>
        </section>
    </section>
</div>
{% endblock %}
