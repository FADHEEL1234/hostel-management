{% extends "base.html" %}

{% block title %}Hostels | Hostel Booking{% endblock %}

{% block content %}
<div class="dash-shell">
    <div class="dash-header">
        <div>
            <h1>Hostel Dashboard</h1>
            <p class="muted">Overview of your properties and recent activity.</p>
        </div>
        <div class="dash-actions">
            <a class="btn" href="/bookings/">View bookings</a>
        </div>
    </div>

    <div class="dash-stats">
        <article class="stat-card stat-blue">
            <p class="stat-label">Total hostels</p>
            <h2 class="stat-value">{{ hostels|length }}</h2>
            <p class="stat-meta">Active listings</p>
        </article>
        <article class="stat-card stat-green">
            <p class="stat-label">Weekly bookings</p>
            <h2 class="stat-value">24</h2>
            <p class="stat-meta">Last 7 days</p>
        </article>
        <article class="stat-card stat-amber">
            <p class="stat-label">Avg. stay</p>
            <h2 class="stat-value">3.2</h2>
            <p class="stat-meta">Nights per guest</p>
        </article>
        <article class="stat-card stat-red">
            <p class="stat-label">Pending payments</p>
            <h2 class="stat-value">5</h2>
            <p class="stat-meta">Needs follow-up</p>
        </article>
    </div>

    <div class="dash-panels">
        <section class="panel chart-panel">
            <div class="panel-head">
                <h3>Occupancy trend</h3>
                <span class="muted">Last 30 days</span>
            </div>
            <div class="chart-canvas">
                <div class="chart-line chart-line-a"></div>
                <div class="chart-line chart-line-b"></div>
            </div>
        </section>
        <section class="panel map-panel">
            <div class="panel-head">
                <h3>Guest origins</h3>
                <span class="muted">Top regions</span>
            </div>
            <div class="map-canvas">
                <div class="map-glow"></div>
                <p class="muted">Regional heatmap preview</p>
            </div>
        </section>
    </div>

    <section class="panel list-panel">
        <div class="panel-head">
            <h3>Hostel listings</h3>
            <span class="muted">Manage and update details</span>
        </div>
        <div class="hostel-list">
            {% for hostel in hostels %}
                <article class="hostel-row">
                    <div class="hostel-media">
                        {% if hostel.image %}
                            <img src="{{ hostel.image.url }}" alt="{{ hostel.name }}" />
                        {% else %}
                            <div class="hostel-placeholder">No image</div>
                        {% endif %}
                    </div>
                    <div class="hostel-info">
                        <h4>{{ hostel.name }}</h4>
                        <p class="muted">{{ hostel.city }}</p>
                        <p>{{ hostel.description|truncatewords:20 }}</p>
                        {% if hostel.amenities.all %}
                            <div class="tags">
                                {% for amenity in hostel.amenities.all %}
                                    <span>{{ amenity.name }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    <div class="hostel-actions">
                        <a class="btn btn-ghost" href="{% url 'hostel_detail' hostel.id %}">View</a>
                    </div>
                </article>
            {% empty %}
                <p>No hostels yet. Add some in the admin panel.</p>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
